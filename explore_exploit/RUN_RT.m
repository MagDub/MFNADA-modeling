
mean_RT_allcond = nan(60,2);
mean_all_heuristics = nan(60,2);

% split in A, B, C, D
mean_all = nan(60,4);
mean_all_SH = nan(60,4);
mean_all_LH = nan(60,4);

% split in high (=1), medium (=0), low (=4), novel (=3)
mean_all_high = nan(60,4);
mean_all_high_SH = nan(60,4);
mean_all_high_LH = nan(60,4);

data_analysis_f = '../../data/data_analysis/';

for part = 501:560
    
    folder_ = strcat(data_analysis_f, 'part_',num2str(part),'/');
    
    load(strcat(folder_, 'mat_AB_desc.mat'))
    load(strcat(folder_, 'mat_AB.mat'))

    load(strcat(folder_, 'mat_ABD_desc.mat'))
    load(strcat(folder_, 'mat_ABD.mat'))

    load(strcat(folder_, 'mat_AD_desc.mat'))
    load(strcat(folder_, 'mat_AD.mat'))

    load(strcat(folder_, 'mat_BD_desc.mat'))
    load(strcat(folder_, 'mat_BD.mat'))

    %% For each cond
    condAD = mat_AD(:,[3,9,11]);
    condBD = mat_BD(:,[3,7,9]);
    condAB = mat_AB(:,[3,9,11]);
    condABD = mat_ABD(:,[3,10,12]);
    
    all_ = [condAD(:,3); condBD(:,3); condAB(:,3); condABD(:,3)];
    mean_RT_allcond(part-500,:) = [mean(all_), std(all_)];
    
    [~, ind_highvalue_AB] = max([mean(mat_AB(:,[5:7]),2), mat_AB(:,8)], [], 2);
    [~, ind_highvalue_ABD] = max([mean(mat_ABD(:,[5:7]),2), mat_ABD(:,8)], [], 2);
    
    mat_AB_high_desc = {'block'    'block_trial'    'horizon'    'gameID'    'sizeA'    'sizeA'    'sizeA'    'sizeD'    'chosen_tree'    'size_chosen_apple'    'RT' 'HighValueTree'};
    mat_ABD_high_desc = {'block'    'block_trial'    'horizon'    'gameID'    'sizeA'    'sizeA'    'sizeA'    'sizeB'    'sizeD'    'chosen_tree'    'size_chosen_apple'    'RT' 'HighValueTree'};
    mat_AB_high = [mat_AB, ind_highvalue_AB];
    mat_ABD_high = [mat_ABD, ind_highvalue_ABD];
    
    save(strcat(folder_, 'mat_AB_high.mat'),'mat_AB_high')
    save(strcat(folder_, 'mat_ABD_high.mat'),'mat_ABD_high')
    save(strcat(folder_, 'mat_AB_high_desc.mat'),'mat_AB_high_desc')
    save(strcat(folder_, 'mat_ABD_high_desc.mat'),'mat_ABD_high_desc')    
    
    %% Convert condition BD in high (=1) 
    condBD_high = condBD;
    
    for i = 1:size(condBD,1)
        if condBD_high(i,2) == 2
            condBD_high(i,2) = 1;
        end
    end
    

    %% Convert condition AB in high (=1) and medium (=0)
    condAB_high = condAB;

    for i = 1:size(condAB,1)
        if (condAB(i,2) == 1 || condAB(i,2) == 2)
            if condAB(i,2) == ind_highvalue_AB(i)
                condAB_high(i,2) = 1;
            else
                condAB_high(i,2) = 0;
            end
        end
    end
    
    %% Split condition ABD in high (=1) and medium (=0)
    condABD_high = condABD;

    for i = 1:size(condABD,1)
        if (condABD(i,2) == 1 || condABD(i,2) == 2)
            if condABD(i,2) == ind_highvalue_ABD(i)
                condABD_high(i,2) = 1;
            else
                condABD_high(i,2) = 0;
            end
        end
    end
    
    
    
    %% All

    allcond = [condAB; condABD; condAD; condBD];
    allcond_high = [condAB_high; condABD_high; condAD; condBD_high];

    mean_all(part-500,:) = [mean(allcond(allcond(:,2)==1,3)), mean(allcond(allcond(:,2)==2,3)), mean(allcond(allcond(:,2)==3,3)), mean(allcond(allcond(:,2)==4,3))];
    mean_all_SH(part-500,:) = [mean(allcond((allcond(:,2)==1)&(allcond(:,1)==6),3)), mean(allcond((allcond(:,2)==2)&(allcond(:,1)==6),3)), mean(allcond((allcond(:,2)==3)&(allcond(:,1)==6),3)), mean(allcond((allcond(:,2)==4)&(allcond(:,1)==6),3))];
    mean_all_LH(part-500,:) = [mean(allcond((allcond(:,2)==1)&(allcond(:,1)==11),3)), mean(allcond((allcond(:,2)==2)&(allcond(:,1)==11),3)), mean(allcond((allcond(:,2)==3)&(allcond(:,1)==11),3)), mean(allcond((allcond(:,2)==4)&(allcond(:,1)==11),3))];
    
    mean_all_high(part-500,:) = [mean(allcond_high(allcond_high(:,2)==1,3)), mean(allcond_high(allcond_high(:,2)==0,3)), mean(allcond_high(allcond_high(:,2)==3,3)), mean(allcond_high(allcond_high(:,2)==4,3))];
    
    mean_all_high_SH(part-500,:) = [mean(allcond_high((allcond_high(:,2)==1)&(allcond_high(:,1)==6),3)), mean(allcond_high((allcond_high(:,2)==0)&(allcond_high(:,1)==6),3)), mean(allcond_high((allcond_high(:,2)==3)&(allcond_high(:,1)==6),3)), mean(allcond_high((allcond_high(:,2)==4)&(allcond_high(:,1)==6),3))];
    mean_all_high_LH(part-500,:) = [mean(allcond_high((allcond_high(:,2)==1)&(allcond_high(:,1)==11),3)), mean(allcond_high((allcond_high(:,2)==0)&(allcond_high(:,1)==11),3)), mean(allcond_high((allcond_high(:,2)==3)&(allcond_high(:,1)==11),3)), mean(allcond_high((allcond_high(:,2)==4)&(allcond_high(:,1)==11),3))];
    
    complex_ = [allcond_high(allcond_high(:,2)==1,3); allcond_high(allcond_high(:,2)==0,3)];
    heuristics_ = [allcond_high(allcond_high(:,2)==3,3); allcond_high(allcond_high(:,2)==4,3)];
    
    mean_all_heuristics(part-500,:) = [mean(complex_), mean(heuristics_)];
    
end

% mean_all_high_desc = {'RT_high_value', 'RT_medium_value', 'RT_novel_value', 'RT_low_value'};
% save('./RT_for_fig/mean_all_high_desc.mat', 'mean_all_high_desc')
% save('./RT_for_fig/mean_all_high.mat', 'mean_all_high')
% save('./RT_for_fig/mean_all_high_SH.mat', 'mean_all_high_SH')
% save('./RT_for_fig/mean_all_high_LH.mat', 'mean_all_high_LH')
% 
% mean_RT_allcond_desc = {'mean_RT', 'mean_RT_std'};
% save('./RT_for_fig/mean_RT_allcond_desc.mat', 'mean_RT_allcond_desc')
% save('./RT_for_fig/mean_RT_allcond.mat', 'mean_RT_allcond')
% 
% mean_all_heuristics_desc = {'RT_complex', 'RT_heuristics'};
% save('./RT_for_fig/mean_all_heuristics_desc.mat', 'mean_all_heuristics_desc')
% save('./RT_for_fig/mean_all_heuristics.mat', 'mean_all_heuristics')




