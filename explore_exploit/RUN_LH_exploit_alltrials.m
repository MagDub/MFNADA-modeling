
data_analysis_f = '../../data/data_analysis/';
data_for_figs_f = '../../data/data_for_figs/';

mat_ABD_LH_all_desc = {'high_value_bandit', 'block','block_trial','horizon','gameID', 'chosen_tree_1','chosen_tree_2', 'chosen_tree_3', 'chosen_tree_4', 'chosen_tree_5', 'chosen_tree_6'};

for part = 501:560
    
    % ABD
    folder_ = strcat(data_analysis_f, 'part_',num2str(part));
    
    load(strcat(folder_, '/logs/logdesc.mat'))
    load(strcat(folder_, '/mat_ABD_high_desc.mat'))
    
    load(strcat(folder_, '/logs/logABDlong.mat'))
    load(strcat(folder_, '/mat_ABD_high.mat'))
    
    mat_ABD_LH = mat_ABD_high(find(mat_ABD_high(:,3)==11),:);
    
    mat_ABD_LH_all = nan(size(mat_ABD_LH,1),11);
    
    for i = 1:size(mat_ABD_LH,1)
    
        tmp_b = mat_ABD_LH(i,1);
        tmp_i = mat_ABD_LH(i,2);

        ind = find((logABDlong(:,1)==tmp_b)&(logABDlong(:,2)==tmp_i));
        
        mat_ABD_LH_all(i,:) = [mat_ABD_LH(i,end) mat_ABD_LH(i,[1:1+3, end-3]) logABDlong(ind(2:end), 6)'];
    
    end
    
    % AB
    load(strcat(folder_, '/logs/logdesc.mat'))
    load(strcat(folder_, '/mat_AB_high_desc.mat'))
    
    load(strcat(folder_, '/logs/logABlong.mat'))
    load(strcat(folder_, '/mat_AB_high.mat'))
    
    mat_AB_LH = mat_AB_high(find(mat_AB_high(:,3)==11),:);
    
    mat_AB_LH_all = nan(size(mat_AB_LH,1),11);
    
    for i = 1:size(mat_AB_LH,1)
    
        tmp_b = mat_AB_LH(i,1);
        tmp_i = mat_AB_LH(i,2);

        ind = find((logABlong(:,1)==tmp_b)&(logABlong(:,2)==tmp_i));
        
        mat_AB_LH_all(i,:) = [mat_AB_LH(i,end) mat_AB_LH(i,[1:1+3, end-3]) logABlong(ind(2:end), 6)'];
    
    end
    
    % AD
    load(strcat(folder_, '/logs/logdesc.mat'))
    load(strcat(folder_, '/mat_AD_desc.mat'))
    
    load(strcat(folder_, '/logs/logADlong.mat'))
    load(strcat(folder_, '/mat_AD.mat'))
    
    mat_AD_LH = mat_AD(find(mat_AD(:,3)==11),:);
    
    mat_AD_LH_all = nan(size(mat_AD_LH,1),11);
    
    for i = 1:size(mat_AD_LH,1)
    
        tmp_b = mat_AD_LH(i,1);
        tmp_i = mat_AD_LH(i,2);

        ind = find((logADlong(:,1)==tmp_b)&(logADlong(:,2)==tmp_i));
        
        mat_AD_LH_all(i,:) = [1 mat_AD_LH(i,[1:1+3, end-2]) logADlong(ind(2:end), 6)'];
    
    end
    
    % BD
    load(strcat(folder_, '/logs/logdesc.mat'))
    load(strcat(folder_, '/mat_BD_desc.mat'))
    
    load(strcat(folder_, '/logs/logBDlong.mat'))
    load(strcat(folder_, '/mat_BD.mat'))
    
    mat_BD_LH = mat_BD(find(mat_BD(:,3)==11),:);
    
    mat_BD_LH_all = nan(size(mat_BD_LH,1),11);
    
    for i = 1:size(mat_BD_LH,1)
    
        tmp_b = mat_BD_LH(i,1);
        tmp_i = mat_BD_LH(i,2);

        ind = find((logBDlong(:,1)==tmp_b)&(logBDlong(:,2)==tmp_i));
        
        mat_BD_LH_all(i,:) = [2 mat_BD_LH(i,[1:1+3, end-2]) logBDlong(ind(2:end), 6)'];
    
    end
       

    % Convert into high (=10), medium (=20), novel(=30), low(=40)

    mat_ABD_LH_picked = mat_ABD_LH_all;

    for i=1:size(mat_ABD_LH_picked,1)

        high_t = mat_ABD_LH_all(i,1);

        for j=0:5
            if mat_ABD_LH_picked(i,end-j)==1 || mat_ABD_LH_picked(i,end-j)==2
                if mat_ABD_LH_picked(i,end-j)==high_t
                    mat_ABD_LH_picked(i,end-j)=1;
                else
                    mat_ABD_LH_picked(i,end-j)=0;
                end
            end
        end

    end

    mat_AB_LH_picked = mat_AB_LH_all;

    for i=1:size(mat_AB_LH_picked,1)

        high_t = mat_AB_LH_all(i,1);

        for j=0:5
            if mat_AB_LH_picked(i,end-j)==1 || mat_AB_LH_picked(i,end-j)==2
                if mat_AB_LH_picked(i,end-j)==high_t
                    mat_AB_LH_picked(i,end-j)=1;
                else
                    mat_AB_LH_picked(i,end-j)=0;
                end
            end
        end

    end

    mat_AD_LH_picked = mat_AD_LH_all;

    for i=1:size(mat_AD_LH_picked,1)

        high_t = mat_AD_LH_all(i,1);

        for j=0:5
            if mat_AD_LH_picked(i,end-j)==1 || mat_AD_LH_picked(i,end-j)==2
                if mat_AD_LH_picked(i,end-j)==high_t
                    mat_AD_LH_picked(i,end-j)=1;
                else
                    mat_AD_LH_picked(i,end-j)=0;
                end
            end
        end

    end

    mat_BD_LH_picked = mat_BD_LH_all;

    for i=1:size(mat_BD_LH_picked,1)

        high_t = mat_BD_LH_all(i,1);

        for j=0:5
            if mat_BD_LH_picked(i,end-j)==1 || mat_BD_LH_picked(i,end-j)==2
                if mat_BD_LH_picked(i,end-j)==high_t
                    mat_BD_LH_picked(i,end-j)=1;
                else
                    mat_BD_LH_picked(i,end-j)=0;
                end
            end
        end

    end

    mat_LH_apple_picked_desc = mat_ABD_LH_all_desc;
    mat_LH_apple_picked = [mat_ABD_LH_picked; mat_BD_LH_picked; mat_AB_LH_picked; mat_AD_LH_picked];
    
    save(strcat(data_analysis_f, 'part_',num2str(part),'/mat_LH_apple_picked.mat'),'mat_LH_apple_picked');
    save(strcat(data_analysis_f, 'part_',num2str(part), '/mat_LH_apple_picked_desc.mat'),'mat_LH_apple_picked_desc');   
    
    mat_LH_apple_picked_all{part-500} = mat_LH_apple_picked;

end

mat_LH_apple_picked_all_desc = mat_LH_apple_picked_desc;


save(strcat(data_for_figs_f, '/mat_LH_apple_picked_all.mat'),'mat_LH_apple_picked_all');
save(strcat(data_for_figs_f, '/mat_LH_apple_picked_all_desc.mat'),'mat_LH_apple_picked_all_desc')




