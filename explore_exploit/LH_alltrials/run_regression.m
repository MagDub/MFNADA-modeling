
addpath('./computeCohen_d/')

close all;

load('mean_explored.mat')
load('mean_exploited.mat')

x = [1:6]';
X = [ones(length(x),1) x];

for id = 1:60
    
    y_explored(id,:) = mean_explored(id,:);
    b_explored(id,:) = X\y_explored(id,:)';
    
    y_exploited(id,:) = mean_exploited(id,:);
    b_exploited(id,:) = X\y_exploited(id,:)';
    
end

% % example
% plot(x, y_explored(id,:)); hold on;
% plot(x, X*b_explored(id,:)')

% stats
exploited_slopes = b_exploited(:,2);
explored_slopes = b_explored(:,2);
[h,p,ci,stats] = ttest(exploited_slopes,explored_slopes); % paired samples t-test
d = computeCohen_d(exploited_slopes,explored_slopes, 'paired'); 

stats_slope = strcat('t(',num2str(stats.df),')=',num2str(round(stats.tstat,3)),', p=', num2str(round(p,3)), ', d=',num2str(round(d,3)));

% stats for each trial

for i = 1:6
    
    mean_exploited_trial = mean_exploited(:,i);
    mean_explored_trial = mean_explored(:,i);
    [h,p,ci,stats] = ttest(mean_exploited_trial,mean_explored_trial); % paired samples t-test
    d = computeCohen_d(mean_exploited_trial,mean_explored_trial, 'paired'); 

    stats_trial{i,:} = strcat('t(',num2str(stats.df),')=',num2str(round(stats.tstat,3)),', p=', num2str(round(p,3)), ', d=',num2str(round(d,3)))
    
end


